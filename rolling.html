<!DOCTYPE html>
<html>
    <head>

        <meta charset="utf-8">
        <title>PinoLog</title>
        <link rel="stylesheet" href="style.css"> 
        <link rel="shortcut icon" href="static/pinolog_fav.png">

    </head>
    
    <body>
        
        <div id="header-banner">
        </div> 

        <div class="rolling-container">
        <!-- BLOG START -->
<!-- ID:Make your own vim bar START -->
<div class="rolling-entry">
<h1><a href="https://blog.danieliu.xyz/blog/html/Make your own vim bar.html">Make your own vim bar</a></h1>
<p class="rolling-date">Fri, Feb 19 15:39</p>
<hr>

<p>
The vim bar that I have been using up until now was <a href="https://github.com/vim-airline/vim-airline">vim airline</a>.
Don't get me wrong, it's a great bar that looks awesome, but I wanted a bar that used my terminal colors, for more consistent theming.
I was also sorta in the mood for cutting down the number of plugins I was using, since chances are, vim already has that feature builtin.
Finally, vim airline had a lot of information I didn't need or care about. I'm aware that it's very configurable, but it's better to 
start from less and add in features than start from bloat and cut down.
</p>

<p>
Anyways, I really only looked for a couple things in my bar:
</p>
<ul>
    <li><p>Display what mode I'm in (and a bar that changes color to reflect that)</p></li>
    <li><p>Indicate if the buffer is modified</p></li>
    <li><p>Display currently opened buffers</p></li>
</ul>

<p>
The first thing we need to do is actually enable the vim bar. You can do so by adding this line to your <code class="inline-code">.vimrc</code>:
</p>
<pre><code>set laststatus=2
set statusline=
</code></pre>
<p>
You can alternatively use a value of 1, which only displays the status line if there are more than 2 windows. With this option,
the bar acts more like a window separator.
What we really want is a statusbar, so it should be on at all times (hence the 2 option).
The second line clears whatever was in your statusline before, this isn't too required.
</p>

<h2>Basic Config</h2>
<p>
You could set your statusline all in one line, but that makes it quite unreadable, especially if it wraps multiple lines.
What we can do instead is append sections using
</p>
<pre><code>set statusline+=[stuff]
set statusline+=[more stuff]
set statusline+=[even more stuff]
</code></pre>
<p>
Vim gives you a couple nice variables to use, the full list can be found by running: <code class="inline-code">:h statusline</code>.
Here's what a minimum statusbar might look like:
</p>
<pre><code>set statusline+=%f
set statusline+=\ %l/%L:%c
</code></pre>
<img src="https://files.danieliu.xyz/blog/vim-bar/vim-bar1.png" />
<p>
It's not much but it's a start.
We are making use of those vim variables I mentioned earlier. Specifically, the first line tells us the file name, and the second line
gives us information on line number and what column we are on.
Also notice the backslash space on the second line, that simply inserts a literal space character, useful for separating blocks.
Play around with the variables and get a basic layout that you like, here's what I came up with:
</p>
<pre><code>set statusline+=\ | 
set statusline+=\ vim\ \[%{mode()}\]
set statusline+=\ %{expand('%:~:.')}\ %m
set statusline+=%=
set statusline+=%y
set statusline+=\ %r\[%{v:register}\]
set statusline+=\ %l/%L:%c
set statusline+=\ |
</code></pre>
<img src="https://files.danieliu.xyz/blog/vim-bar/vim-bar2.gif" />
<p>
A couple interesting things to point out, whenever you see <code class="inline-code">%{}</code> we are calling a vim function, these can be ones you write too, which you will see a bit later. Next, <code class="inline-code">%=</code> is pretty useful since it right justifies everything after it.
</p>

<h2>Colors</h2>
<p>
The white bar is getting a bit tiring, let's see how we can set colors. The easiest way is to use:
</p>
<code>
hi StatusLine cterm=None gui=None ctermfg=black ctermbg=Yellow
</code>
<p>
These colors will be based off your terminal's colors, you can find a full list as well as what they look like by running <code class="inline-code">:runtime syntax/colortest.vim</code> in command mode. 
</p>

<p>
Alright cool, so we can set the bar color, but how do we set the color of individual sections of the bar?
Well, we have other highlights to our disposal that we can set and reference from within our statusline, specifically:
</p>
<pre><code>hi User1 cterm=None gui=None ctermfg=White ctermbg=Black
hi User2 cterm=None gui=None ctermfg=Black ctermbg=LightBlue
</code></pre>
<p>
And inside our statusline:
</p>
<pre><code>set statusline+=%1*\ |
set statusline+=%0*\ vim\ \[%{mode()}\]
set statusline+=\ %1*\ %{expand('%:~:.')}\ %m
set statusline+=%=
set statusline+=%y
set statusline+=\ %2*
set statusline+=\ %r\[%{v:register}\]
set statusline+=\ %l/%L:%c\ |
set statusline+=%1*\ |
</code></pre>
<img src="https://files.danieliu.xyz/blog/vim-bar/vim-bar3.png" />
<p>
Note how our use of <code class="inline-code">%1*</code> corresponds to <code class="inline-code">User1</code> and similarly for the other user variables. From what I've seen, <code class="inline-code">StatusLine</code> corresponds to <code class="inline-code">%0*</code>.
</p>

<h2>Responsive Bar</h2>
<p>
With this we can make our bar change color depending on what mode we are in, here's a function to do it:
</p>
<pre><code>function! StatusModeColor()
    if (mode() =~# '\v(n|no)')
        hi StatusLine cterm=None gui=None ctermfg=black ctermbg=Yellow
    elseif (mode() =~# '\v(v|V)')
        hi StatusLine cterm=None gui=None ctermfg=black ctermbg=Red
    elseif (mode() ==# 'i')
        hi StatusLine cterm=None gui=None ctermfg=black ctermbg=LightBlue
    elseif (mode() ==# 'c') 
        hi StatusLine cterm=None gui=None ctermfg=black ctermbg=Green
    else
        hi StatusLine cterm=None gui=None ctermfg=black ctermbg=DarkGrey
    endif

    return ''
endfunction
</code></pre>
<p>
and just add this line to the top of your statusbar:
</p>
<code>
set statusline+=%{StatusModeColor()}
</code>
<img src="https://files.danieliu.xyz/blog/vim-bar/vim-bar4.gif" />
<p>
This way, the function will get called on statusbar redraw. This may not be the most efficient, and you can perhaps call the function on a mode change hook or whatever. The mode names in each of the if statements is what is returned from <code class="inline-code">mode()</code>. You can find a more or less full list <a href="https://gitlab.com/greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/after/plugin/statusline.vim">here</a>.
</p>

<p>
And finally, I wanted some sort of indication if the buffer was modified or not, so here's another function to do that:
</p>
<pre><code>function! StatusModifiedColor()
    if getbufinfo(1)[0].changed
        hi User1 cterm=None gui=None ctermfg=Black ctermbg=Magenta
    else
        hi User1 cterm=None gui=None ctermfg=White ctermbg=Black
    endif

    return ''
endfunction
</code></pre>
<p>
And again, add this to the top of your statusbar:
</p>
<code>
set statusline+=%{StatusModifiedColor()}
</code>
<img src="https://files.danieliu.xyz/blog/vim-bar/vim-bar5.gif" />
<p>
And that's about it, a brand new, plugin-less vim bar! My full vimrc can be found <a href="https://github.com/MrPicklePinosaur/dotfiles/blob/master/.vimrc">here</a> if you are interested. So far, I haven't found the nicest way of displaying open buffers, since vim's builtin tabline displays open <i>tabs</i>, not buffers. Perhaps that will be a post for another day when I figure it out.
</p>

<h2>Additional Reading</h2>
<p>There's a couple of great resources you should look into</p>
<ul>
    <li><p><a href="https://shapeshed.com/vim-statuslines/">Build your own Vim statusline</a></p></li>
    <li><p><a href="https://gitlab.com/greduan/dotfiles/blob/76e16dd8a04501db29989824af512c453550591d/vim/after/plugin/statusline.vim">Eduardo Lavaque's vim bar</a></p></li>
    <li><p><a href="https://gist.github.com/ahmedelgabri/b9127dfe36ba86f4496c8c28eb65ef2b">ahmedelgabri's vim bar</a></p></li>
</ul>
</div>
<!-- ID:Make your own vim bar END -->
<!-- ID:Configure Zathura with Xresources START -->
<div class="rolling-entry">
<h1><a href="https://blog.danieliu.xyz/blog/html/Configure Zathura with Xresources.html">Configure Zathura with Xresources</a></h1>
<p class="rolling-date">Wed, Feb 03 14:22</p>
<hr>

<p>
The .Xresources file is great. It is a centralized place for you to define color themes and fonts among other things to be read by a variety of applications. This allows for a consistent theme, and less hassle when changing settings. Everyone knows that repetitive code is bad code.
</p>

<p>
However, for whatever reason, zathura, my pdf viewer of choice, does not want to read from this file.
The effect I wanted to achieve was to make zathura have the same background color as my terminal, like so:
</p>

<img src="https://files.danieliu.xyz/blog/xresource-zathura/zathura_xresource.png"/>

<p>
Obviously we aren't going to give up over such a small obstacle. 
It's a slight hassle, but we could simply have a shell script read from Xresource and write into the zathura config file.
The only downside is that the script needs to be run everytime you want to modify the config.
</p>

<p>
First, locate your zathura config file. By default, it should be located at <code class="inline-code">$HOME/.config/zathura/zathurarc</code>. So this is the file we want to write our new config to.
</p>

<p>
Now to read from Xresource, we could just use sed or grep and find the line we want and format it so we get the value. However, if you used macros, this might not play out too well. Thankfully, X gives us a handy command to query our Xresource settings, namely <code class="inline-code">xrdb -query</code>. The output of this command looks something like this:
<pre><code>*.background:   #2E3440
*.color0:       #3B4252
*.color1:       #BF616A
*.color10:      #A3BE8C
*.color11:      #EBCB8B
*.color12:      #81A1C1
*.color13:      #B48EAD
*.color14:      #8FBCBB
*.color15:      #ECEFF4
*.color2:       #A3BE8C
*.color3:       #EBCB8B
*.color4:       #81A1C1
*.color5:       #B48EAD
*.color6:       #88C0D0
*.color7:       #E5E9F0
*.color8:       #4C566A
*.color9:       #BF616A
</code></pre>
</p>

<p>
So now all we need to do is grep for the option we want, and use awk to grab the second column.
</p>

<p>
I made a function to query X like so:
<pre><code>get_option() {
    xrdb -query | grep $1 | awk '{print $2}'
}
</code></pre>
</p>

<p>
And now we are ready to write to our config file. Since our config will most likely be multiline, we can use <a href="https://en.wikipedia.org/wiki/Here_document#Unix_shells">heredocs</a>:
<pre><code>cat &gt; "$HOME/.config/zathura/zathurarc" &lt;&lt;- CONF
    set recolor
    set recolor-darkcolor "$(get_option foreground)"
    set recolor-lightcolor "$(get_option *.color0:)"
    set default-bg "$(get_option *.color0:)"
    map i recolor
CONF
</code></pre>
</p>

<p>
Note that using <code class="inline-code">&lt;&lt;-</code> ignores leading tabs while <code class="inline-code">&lt;&lt;</code> does not, just for aesthetic. Notice how we used command substitution to call the function we wrote earlier.
</p>

<p>
Finally, chmod your shell script and run it every time you want to make a change to your config. Since we are overwriting the zathura config, you want to define your options inside the body of the heredoc instead. 
The example config I gave provides the background color behavior I described earlier. Specifically, we actually redefine the colors zathura's 'invert color' mode uses. This way, we can toggle between the original pdf color and our colors with the 'i' key.
</p>

<p>
And that's it! We are done, shell script to the rescue.
</p>

</div>
<!-- ID:Configure Zathura with Xresources END -->
<!-- ID:ブログへようこそ START -->
<div class="rolling-entry">
<h1><a href="https://blog.danieliu.xyz/blog/html/ブログへようこそ.html">ブログへようこそ</a></h1>
<p class="rolling-date">Mon, Jan 18 20:34</p>
<hr>

<p>
僕のブログへようこそ！このサイトでいろいろソフトに関することを掲載するつもりです．
フワイ，<a href="https://github.com/MrPicklePinosaur/pb">このシェルスクリプト</a>で作ります，ブログは．
</p>

<p>
実は，日本語初心者ですから多分文法がちょっと変でしょう．
ブログ書くのは日本語練習って思います．とにかく，頑張ってます．
</p>

<p>
あーほら，ギフです．どう致しまして．
</p>

<img src="https://files.danieliu.xyz/blog/welcome-jp/bonk.gif" />

</p>
</div>
<!-- ID:ブログへようこそ END -->
<!-- ID:Vim users remap caps to escape rnrn START -->
<div class="rolling-entry">
<h1><a href="https://blog.danieliu.xyz/blog/html/Vim users remap caps to escape rnrn.html">Vim users remap caps to escape rnrn</a></h1>
<p class="rolling-date">Fri, Jan 15 17:02</p>
<hr>

<p>
Probably the worst nightmare of any vim user is accidentally hitting the caps key.
</p>

<p>
Caps lock is useless, for the vast majority of time, you only need to capitalize just the first letter, so pressing caps + letter + caps is too many key presses! Simply releasing the shift key is much faster and feels much better. 
</p>

<p>
However most importantly, it leaves such an ergonomic key open for... escape! One of the most commonly hit keys of vim users. Such an important key is so far from the home row, almost acting counterproductive to the speed boost vim gives you.
</p>

<h2>How to remap (Linux)</h2>
<h3>Setxkbmap</h3>
<p>
On linux, if you happen to use X (which is most people), you can get away with using setxkbmap, simply include the following in your .xinitrc, or some alternative auto run script:
<code>
setxkbmap -option caps:escape
</code>

For the most part this will work well enough. Another option would be to make a custom key map with xmodmap, if one of these has any issues give the other a try.
</p>

<h3>Xmodmap</h3>
<p>
You can make a custom key map by running:
<code>
xmodmap -pke &gt; ~/.Xmodmap
</code>
and then simply add
<code>
xmodmap "$HOME/.Xmodmap"
</code>
to your .xinitrc or equivalent.
</p>

<p>
As for the actual configuration, I added these lines to .Xmodmap:
<pre><code>remove Lock = Caps_Lock
keysym Caps_Lock = Escape
add Lock = Caps_Lock
</code></pre>
</p>

<p>
Oh, and also, if you screw something up and want to reset your keyboard, you can use:
<code>
setxkbmap -layout us
</code>
or whatever your default keyboard layout was.
</p>

<h2>How to remap (Windows)</h2>
<p>
I'm not much of a windows user, but here's a nice article from the <a href="https://vim.fandom.com/wiki/Map_caps_lock_to_escape_in_Windows#AutoHotkey">vim website</a>. I specifically recommend using autohotkey, as it gives you much more fine control on the behavior (you can do things like make caps function as escape only when running vim).
</p>

<h2>Afterthought</h2>
<p>
An alternative may be actually mapping caps to control instead, arguable a much more used key than escape in vim and especially in gui programs. Instead, you can use ctrl+[ as <a href="https://vim.fandom.com/wiki/Avoid_the_escape_key">escape instead</a> in vim. I'm still currently using escape, but I'll probably try control sometime in the near future. Regardless, the point is, uninstall caps lock already!
</p>

<h2>Additional Reading</h2>
<p>Here are some links you might want to check out:</p>
<ul>
    <li><p><a href="https://wiki.archlinux.org/index.php/xmodmap">Arch Wiki - xmodmap</p></a></li>
    <li><p><a href="https://wiki.archlinux.org/index.php/Xorg/Keyboard_configuration">Arch Wiki - X keyboard config</p></a</li>
    <li><p><a href="https://wiki.linuxquestions.org/wiki/Configuring_keyboards#The_Xmodmap.2FSetxkbmap_Method">LinuxQuestions - Configuring Keyboards</p></a></li>
</ul>
</div>
<!-- ID:Vim users remap caps to escape rnrn END -->
<!-- ID:Animelon for learning japanese START -->
<div class="rolling-entry">
<h1><a href="https://blog.danieliu.xyz/blog/html/Animelon for learning japanese.html">Animelon for learning japanese</a></h1>
<p class="rolling-date">Wed, Jan 06 21:33</p>
<hr>
<p>
Found a cool anime site for learning japanese: <a href="https://animelon.com/">animelon.com</a>. It provides english subtitles as well as japanese (with options for romaji, ひらがな and カタカナ). You can also hover over subtitles to get definitions, and jump between dialogue lines. It also has some more hardcore features like saving dialogue for flashcard quizzes. I'm not hardcore so I just like to have the two subs at the same time and do some passive learning. Overall the uploads are decently high quality so it can used for general anime-watching too. Only downside is that it's selection is much smaller than your standard site, and it almost completely lacks the newer seasonal stuff, since they need time to make the necessary subs or whatever. Anyways that's it, doesn't hurt to give it a shot.
</p>

<img src="https://files.danieliu.xyz/blog/animelon/animelon.jpg"/>
</div>
<!-- ID:Animelon for learning japanese END -->
<!-- ID:Welcome To Blog START -->
<div class="rolling-entry">
<h1><a href="https://blog.danieliu.xyz/blog/html/Welcome To Blog.html">Welcome To Blog</a></h1>
<p class="rolling-date">Tue, Dec 22 13:38</p>
<hr>
<p>
Welcome to my blog! This is where I will post random snippets and possibly guides to some tech related stuff.
This blog was generated with a very trash <a href="https://github.com/MrPicklePinosaur/pb">shell script</a> I wrote, for the sake of avoiding
bloated web frameworks. There's still a couple of things I would like to improve, such as how you can't have certain special characters
in the blog name, and I would probably like some sort of tag feature to filter the blog posts. Oh and, feel free to subscribe to the 
<a href="https://blog.danieliu.xyz/rss.xml">rss feed</a>, if you care enough.
</p>

<p>Here's a random code block, just for css testing purposes:</p>
<code>sudo rm -rf /</code>

<p>And here's a random gif:</p>
<img src="https://pa1.narvii.com/6611/257c27d4c392cb9381f186bc060c37771c974600_hq.gif" />

<p>That's all for now :&gt; </p>
</div>
<!-- ID:Welcome To Blog END -->
        <!-- BLOG END -->
        </div>

    </body>
    <script src="include.js"></script>

</html>
